(function(){var e={500:function(e,t,r){"use strict";var o=r(963),a=r(252),s=r(119),i=r(577);const n=e=>((0,a.dD)("data-v-48eec343"),e=e(),(0,a.Cn)(),e),l={class:"content container",ref:"catalog"},c={class:"content__top content__top--catalog",ref:"titlePage"},d=n((()=>(0,a._)("h1",{class:"content__title"},"Каталог",-1))),u={key:0,class:"content__info content__info--hidden"},p={class:"content__catalog"},m={class:"filter",ref:"entireFilter"},f={class:"page-preferences",ref:"pageHandler"},_=n((()=>(0,a._)("span",{class:"page-preferences__title"},"Количество товаров на странице",-1))),h={class:"page-preferences__list"},g=["onClick"],y={class:"catalog"},v={key:1,class:"catalog__notification"},b=(0,a.Uk)(" Что-то пошло не так... "),w=(0,a.Uk)(" Перезагрузить "),k={key:2,class:"catalog__notification"};function P(e,t,r,s,n,P){const C=(0,a.up)("ProductFilter"),I=(0,a.up)("BaseLoader"),x=(0,a.up)("BaseButtonPrimary"),T=(0,a.up)("ProductList"),D=(0,a.up)("BasePagination");return(0,a.wg)(),(0,a.iD)("main",l,[(0,a._)("div",c,[d,n.productsLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",u,(0,i.zw)(P.countProducts)+" "+(0,i.zw)(P.declensionWord(P.countProducts)),1))],512),(0,a._)("div",p,[(0,a._)("aside",m,[(0,a.Wm)(C,{"price-from":n.filterPriceFrom,"onUpdate:price-from":t[0]||(t[0]=e=>n.filterPriceFrom=e),"price-to":n.filterPriceTo,"onUpdate:price-to":t[1]||(t[1]=e=>n.filterPriceTo=e),"category-id":n.filterCategeryId,"onUpdate:category-id":t[2]||(t[2]=e=>n.filterCategeryId=e),"color-id":n.filterColorId,"onUpdate:color-id":t[3]||(t[3]=e=>n.filterColorId=e),"category-entries":n.filterCategeryPropsEntries,"onUpdate:category-entries":t[4]||(t[4]=e=>n.filterCategeryPropsEntries=e),class:"modal-test"},{default:(0,a.w5)((()=>[(0,a._)("div",f,[_,(0,a._)("ul",h,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)([9,18,36],((t,r)=>(0,a._)("li",{class:"page-preferences__item",key:r},[(0,a._)("button",{class:"button button--second page-preferences__button button__circle",onClick:(0,o.iM)((r=>{n.productsPerPage=t,P.buttonCircle(r,e.$refs[`circleButton${t}`])}),["prevent"])},[(0,a.Uk)((0,i.zw)(t)+" ",1),(0,a._)("span",{class:"circle",ref_for:!0,ref:`circleButton${t}`},null,512)],8,g)]))),64))])],512)])),_:1},8,["price-from","price-to","category-id","color-id","category-entries"])],512),(0,a._)("section",y,[n.productsLoading?((0,a.wg)(),(0,a.j4)(I,{key:0,class:"catalog__notification"})):(0,a.kq)("",!0),n.productsLoadingFailed?((0,a.wg)(),(0,a.iD)("div",v,[b,(0,a.Wm)(x,{onClick:(0,o.iM)(P.loadProducts,["prevent"])},{default:(0,a.w5)((()=>[w])),_:1},8,["onClick"])])):(0,a.kq)("",!0),P.countProducts||n.productsLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",k," К сожалению, по вашему запросу ничего не найдено. ")),n.productsOpened&&P.countProducts?((0,a.wg)(),(0,a.j4)(T,{key:3,products:P.products,"picture-load":n.pictureIsLoad,"onUpdate:picture-load":t[5]||(t[5]=e=>n.pictureIsLoad=e)},null,8,["products","picture-load"])):(0,a.kq)("",!0),n.productsOpened&&P.countProducts?((0,a.wg)(),(0,a.j4)(D,{key:4,modelValue:n.page,"onUpdate:modelValue":t[6]||(t[6]=e=>n.page=e),count:P.countProducts,"per-page":n.productsPerPage},null,8,["modelValue","count","per-page"])):(0,a.kq)("",!0)])])],512)}const C={class:"catalog__list",ref:"elem"};function I(e,t,r,o,s,i){const n=(0,a.up)("ProductItem");return(0,a.wg)(),(0,a.iD)("ul",C,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.products,(e=>((0,a.wg)(),(0,a.j4)(n,{class:"catalog__item catalog__item--hiden",product:e,key:e.id,"pic-is-load":s.picIsLoad,"onUpdate:pic-is-load":t[0]||(t[0]=e=>s.picIsLoad=e)},null,8,["product","pic-is-load"])))),128))],512)}function x(e,t){if(!e)return!1;const r=Object.getOwnPropertyNames(e);if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if("undefined"===typeof e[t[o]])return!1;return!0}function T(e){if(!e)return!1;const t=["colors","id","image","mainProp","offers","preview","price","slug","title"];return x(e,t)}function D(e){let t=!0;return!!e&&(Object.values(e).forEach((e=>{T(e)||(t=!1)})),t)}const O=e=>((0,a.dD)("data-v-b558d2d2"),e=e(),(0,a.Cn)(),e),L={key:0,class:"catalog__item-load"},F=["src","srcset","alt"],S={class:"catalog__title"},$={class:"catalog__price"},B={class:"catalog__item-params"},V=O((()=>(0,a._)("span",{class:"catalog__item-params"},"Цвет",-1))),U=(0,a.Uk)(" Купить "),A={key:0,class:"notification-cart"},E={width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 50 50",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},z=O((()=>(0,a._)("circle",{style:{fill:"#8be000"},cx:"25",cy:"25",r:"25"},null,-1))),q=O((()=>(0,a._)("polyline",{style:{fill:"none",stroke:"#272727","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10"},points:"\n            38,15 22,33 12,25 "},null,-1))),W=[z,q],H=O((()=>(0,a._)("span",{class:"notification-cart__message"},[(0,a._)("span",null," Товар добавлен в корзину ")],-1))),M=(0,a.Uk)("Перейти в коризну"),K={key:1,class:"notification-cart"},j=O((()=>(0,a._)("span",{class:"notification-cart__message"}," Вы забыли выбрать цвет товара. ",-1))),N=[j],Y={key:2,class:"notification-cart"},Z={width:"50",height:"50",style:{overflow:"visible","enable-background":"new 0 0 32 32"},viewBox:"0 0 32 32","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},G=O((()=>(0,a._)("circle",{cx:"16",cy:"16",id:"BG",r:"16",style:{fill:"#d72828"}},null,-1))),R=O((()=>(0,a._)("path",{d:"M14.5,25h3v-3h-3V25z M14.5,6v13h3V6H14.5z",id:"Exclamatory_x5F_Sign",style:{fill:"#272727"}},null,-1))),Q=[G,R],J={class:"notification-cart__message"};function X(e,t,r,s,n,l){const c=(0,a.up)("BaseLoaderCircle"),d=(0,a.up)("router-link"),u=(0,a.up)("ProductProp"),p=(0,a.up)("BaseButtonPrimary"),m=(0,a.up)("BaseNotification");return(0,a.wg)(),(0,a.iD)("li",null,[!r.picIsLoad||n.status.addSending?((0,a.wg)(),(0,a.iD)("div",L,[(0,a.Wm)(c)])):(0,a.kq)("",!0),(0,a._)("div",(0,a.dG)(e.$attrs,{style:n.status.addSending?"display:none":"display: flex"}),[(0,a.Wm)(d,{class:"catalog__pic",to:{name:"product",params:{id:r.product.id}}},{default:(0,a.w5)((()=>[(0,a._)("img",{src:r.product.image,srcset:r.product.imageHigh,alt:r.product.item,ref:"pic"},null,8,F)])),_:1},8,["to"]),(0,a._)("h3",S,[(0,a._)("a",{href:"#",onClick:t[0]||(t[0]=(0,o.iM)(((...t)=>e.openQuickView&&e.openQuickView(...t)),["prevent"]))},(0,i.zw)(r.product.title),1)]),(0,a._)("span",$,(0,i.zw)(l.numberFormat(r.product.price))+" ₽ ",1),(0,a._)("span",B,(0,i.zw)(l.propTitle),1),(0,a.Wm)(u,{"available-params":l.availableParams,productId:r.product.id,property:n.property,"chosen-property":n.currentProperty,"onUpdate:chosen-property":t[1]||(t[1]=e=>n.currentProperty=e)},null,8,["available-params","productId","property","chosen-property"]),V,(0,a.Wm)(u,{"available-params":l.colorsOffer,productId:r.product.id,property:"color","chosen-property":n.currentColorOffer,"onUpdate:chosen-property":t[2]||(t[2]=e=>n.currentColorOffer=e)},null,8,["available-params","productId","chosen-property"]),(0,a.Wm)(p,{class:"button__buy",disabled:!(n.currentColorOffer&&l.currentOffer),onClick:t[3]||(t[3]=e=>l.doAddToCart(l.currentOffer,n.currentColorOffer))},{default:(0,a.w5)((()=>[U])),_:1},8,["disabled"])],16),(0,a.Wm)(m,{finish:n.status.added||n.status.error,loading:n.status.addSending},{default:(0,a.w5)((()=>[n.status.added?((0,a.wg)(),(0,a.iD)("div",A,[((0,a.wg)(),(0,a.iD)("svg",E,W)),H,(0,a.Wm)(d,{to:{name:"cart"},class:"notification-cart__link"},{default:(0,a.w5)((()=>[M])),_:1})])):n.currentColorOffer?n.status.error?((0,a.wg)(),(0,a.iD)("div",Y,[((0,a.wg)(),(0,a.iD)("svg",Z,Q)),(0,a._)("span",J,[(0,a._)("span",null,(0,i.zw)(n.status.text),1)])])):(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",K,N))])),_:1},8,["finish","loading"])])}function ee(e,t,r,o,s,i){return(0,a.wg)(),(0,a.iD)("div",(0,a.dG)({class:"lds-dual-ring"},e.$attrs),null,16)}var te={data(){return{}}},re=r(744);const oe=(0,re.Z)(te,[["render",ee],["__scopeId","data-v-32da1a99"]]);var ae=oe;const se={class:"circle",ref:"circleButton"};function ie(e,t,r,o,s,i){return(0,a.wg)(),(0,a.iD)("button",(0,a.dG)(e.$attrs,{class:"button button--primery button__circle",onClick:t[0]||(t[0]=t=>i.buttonCircle(t,e.$refs.circleButton))}),[(0,a._)("span",se,null,512),(0,a.WI)(e.$slots,"default",{},void 0,!0)],16)}var ne=r(38);function le(e,t,r,{x:o,y:a},{scaleTo:s,effectOfSubsideEarlyOn:i}){const n=i??"-=0.6";Array.isArray(r)&&([r]=r);const l=window.getComputedStyle(t.path[0]),{backgroundColor:c}=l;r.style.backgroundColor="rgb(255, 255, 255)"===c?"#272727":"#9eff00",e.restart(),e.fromTo(r,{display:"block",opacity:0,scale:0,left:o??t.offsetX,top:a??t.offsetY},{ease:"sine",duration:1,scale:s??40,opacity:1}).to(r,{display:"none",opacity:0,duration:1},n).addPause()}function ce(e,t){const r=ne.p8.timeline();le(r,e,t,{},{})}var de={data(){return{}},methods:{buttonCircle:ce}};const ue=(0,re.Z)(de,[["render",ie],["__scopeId","data-v-a0792698"]]);var pe=ue;function me(e){return(new Intl.NumberFormat).format(e)}const fe=["checked","value"];function _e(e,t,r,s,n,l){return(0,a.wg)(),(0,a.iD)("ul",{class:(0,i.C_)(l.classes.ul)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.availableParams,(e=>((0,a.wg)(),(0,a.iD)("li",{class:(0,i.C_)(l.classes.li),key:e.offerProp},[(0,a._)("label",{class:(0,i.C_)(l.classes.label)},[(0,a.wy)((0,a._)("input",{type:"radio",class:(0,i.C_)(["sr-only",l.classes.input]),checked:e.offerProp===n.propertyValue,value:e.offerProp,"onUpdate:modelValue":t[0]||(t[0]=e=>n.propertyValue=e)},null,10,fe),[[o.G2,n.propertyValue]]),(0,a._)("span",{class:(0,i.C_)(l.classes.span),style:(0,i.j5)(["color"===r.property?l.doStyle(e.offerValue.color.code):null])},(0,i.zw)("color"!==r.property?` ${e.offerProp}`:null),7)],2)],2)))),128))],2)}var he={props:{availableParams:{require:!0},productId:{require:!0,type:Number},property:{type:String},chosenProperty:{type:String}},data(){return{propertyValue:null}},computed:{classes(){return{ul:"color"===this.property?"colors colors--black":"sizes sizes--primery",li:"color"===this.property?"colors__item":"sizes__item",label:"color"===this.property?"colors__label":"sizes__label",input:"color"===this.property?"colors__radio":"sizes__radio",span:"color"===this.property?"colors__value":"sizes__value"}},colors(){return this.$store.getters.colors}},emits:["update:chosenProperty"],watch:{propertyValue(){this.$emit("update:chosenProperty",this.propertyValue)},chosenProperty:{handler(e){this.propertyValue=e},immediate:!0}},methods:{doStyle(e){return"#ffffff"===e?"background-color: #e9e9e9;":e?`background-color: ${e};`:null},searchColor(e){return this.colors.find((t=>{const r=t.title.replaceAll("ё","е");return r===e}))}}};const ge=(0,re.Z)(he,[["render",_e],["__scopeId","data-v-590ddc34"]]);var ye=ge;const ve={class:"notification__wrapper"},be={key:1,class:"notification__content"};function we(e,t,r,s,i,n){const l=(0,a.up)("BaseLoaderCircle");return(0,a.wg)(),(0,a.j4)(a.lR,{to:"#notification-target"},[(0,a.Wm)(o.uT,{name:"notification-show",appear:""},{default:(0,a.w5)((()=>[n.openNotification?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"notification",tabindex:"0",ref:"notification",onMouseover:t[0]||(t[0]=e=>i.hoverNotification=!0),onMouseleave:t[1]||(t[1]=e=>i.hoverNotification=!1),onFocusin:t[2]||(t[2]=e=>i.focusNotification=!0),onFocusout:t[3]||(t[3]=e=>i.focusNotification=!1)},[(0,a._)("div",ve,[r.loading?((0,a.wg)(),(0,a.j4)(l,{key:0})):(0,a.kq)("",!0),r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",be,[(0,a.WI)(e.$slots,"default")]))])],544)):(0,a.kq)("",!0)])),_:3})])}var ke={components:{BaseLoaderCircle:ae},props:{finish:{require:!0,type:Boolean},loading:{require:!0,type:Boolean}},data(){return{addedStatus:!1,hoverNotification:!1,focusNotification:!1}},methods:{addHover(){this.hoverNotification||(this.hoverNotification=!0)},removeHover(){this.hoverNotification&&(this.hoverNotification=!1)}},computed:{openNotification(){return this.addedStatus||this.loading||this.hoverNotification||this.focusNotification}},watch:{finish(e){this.addedStatus=e,clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.addedStatus=!1}),3e3)}}};const Pe=(0,re.Z)(ke,[["render",we]]);var Ce=Pe,Ie={components:{ProductProp:ye,BaseLoaderCircle:ae,BaseButtonPrimary:pe,BaseNotification:Ce},inheritAttrs:!1,props:{product:{required:!0,validator:e=>T(e)},picIsLoad:{required:!0,type:Boolean}},data(){return{property:this.product.mainProp.code,productOffers:this.product.offers,isQuickViewOpen:!1,currentProperty:null,currentColorOffer:null,status:{},isShowAddedMessage:!1}},emits:["update:picIsLoad"],methods:{numberFormat:me,doAddToCart(e,t){if(this.status.addSending=!0,t&&e){const r=e.id,o=this.$store.getters.colors.find((e=>e.title===t)).id;this.$store.dispatch("addProductToCart",{productId:r,chosenColor:o,amount:1}).then((()=>{const e=this.$store.getters.cartStatusError;e.status?(this.status.error=!0,this.status.addSending=!1,this.status.text=e.textError,this.status.added=!1):(this.isShowAddedMessage=!0,this.status.added=!0,this.status.addSending=!1)})).catch((()=>{this.status.error=!0,this.status.addSending=!1}))}else setTimeout((()=>{this.status.error=!0,this.status.addSending=!1,this.status.text="Укажите все обязательные параметры"}),0)}},computed:{chosenOffer(){return this.$store.getters.chosenOffers.find((e=>e.productId?e.productId===+this.$route.params.id:null))},propTitle(){return this.product?this.product.offers[0].propValues[0].productProp.title:""},chosenProperty(){const e=this.$store.getters.chosenOffers.find((e=>e.productId===this.product.id));return e?e.offer.propValues[0].value:null},availableParams(){return this.product.offers.map((e=>({offerProp:e.propValues[0].value,offerValue:this.product.colors.find((t=>t.color.title.replaceAll("ё","е")===e.propValues[0].value))})))},colorsOffer(){return this.product?this.product.colors.map((e=>({offerProp:e.color.title,offerValue:{color:{code:e.color.code}}}))):[]},currentOffer(){return this.currentProperty?this.product.offers.find((e=>e.propValues[0].value===this.currentProperty)):this.chosenOffer?(this.currentProperty=this.chosenOffer.offer.propValues[0].value,this.chosenOffer.offer):null}},watch:{chosenProperty:{handler(e){e&&(this.currentProperty=e)},immediate:!0},currentProperty:{handler(e){const t=this.product.offers.find((t=>t.propValues[0].value===e));e&&this.$store.commit("addChosenOffers",{productId:this.product.id,offer:t})}},currentOffer:{handler(e){e&&this.$store.commit("addChosenOffers",{offer:this.currentOffer,productId:this.product.id})},deep:!0},status:{handler(e){e.addSending?console.log("Добавление"):console.log("Добавлен")},deep:!0}},mounted(){const{pic:e}=this.$refs,t=new Image;t.onload=()=>{e.src=t.src,this.$emit("update:picIsLoad",!0)},t.src=e.src}};const xe=(0,re.Z)(Ie,[["render",X],["__scopeId","data-v-b558d2d2"]]);var Te=xe;function De(e){ne.p8.fromTo(e,{y:500},{y:0,duration:1.5})}function Oe([e,t]){const r=ne.p8.timeline();r.fromTo(e,{y:200,opacity:0},{y:0,opacity:1,duration:.7,ease:"sine"}).fromTo(t,{opacity:0},{x:0,opacity:1,duration:.8,ease:"expo"})}function Le(e){const t=ne.p8.timeline();e.forEach((e=>{t.add((()=>e.classList.remove("catalog__item--hiden"))).fromTo(e,{scale:0},{scale:1,opacity:1,duration:.5,ease:"back"},"-=0.3")}))}function Fe(e){const t=ne.p8.timeline();return t.to(e,{opacity:0,duration:.4,y:-200})}var Se={components:{ProductItem:Te},props:{products:{require:!0,validator:e=>D(e)},pictureLoad:{required:!0,type:Boolean}},data(){return{picIsLoad:!1,quantity:0}},methods:{animateArrayOfElements:Le},emits:["update:pictureLoad"],watch:{picIsLoad:{handler(e){if(e){this.quantity++;const e=Array.from(this.$refs.elem.children),t=e.map((e=>e.querySelector(".catalog__item")));this.picIsLoad=!1,this.quantity===e.length&&(this.animateArrayOfElements(t),this.$emit("update:pictureLoad",!0),this.picIsLoad=!0)}},immediate:!0}}};const $e=(0,re.Z)(Se,[["render",I]]);var Be=$e;const Ve={class:"catalog__pagination pagination"},Ue={class:"pagination__item"},Ae=["disabled"],Ee=(0,a._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-arrow-left"})],-1),ze=[Ee],qe=["onClick"],We={class:"pagination__item"},He=["disabled"],Me=(0,a._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-arrow-right"})],-1),Ke=[Me];function je(e,t,r,s,n,l){return(0,a.wg)(),(0,a.iD)("ul",Ve,[(0,a._)("li",Ue,[(0,a._)("button",{href:"#",class:(0,i.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":l.page<=1}]),disabled:l.page<=1,"aria-label":"Предыдущая страница",onClick:t[0]||(t[0]=(0,o.iM)((e=>l.paginate(l.page-1)),["prevent"]))},ze,10,Ae)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.pages,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{class:"pagination__item",key:t},[(0,a._)("a",{href:"#",class:(0,i.C_)(["pagination__link",{"pagination__link--current":e===l.page}]),onClick:(0,o.iM)((t=>l.paginate(e)),["prevent"])},(0,i.zw)(e),11,qe)])))),128)),(0,a._)("li",We,[(0,a._)("button",{class:(0,i.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":l.page>=l.pages}]),href:"#",disabled:l.page>=l.pages,"aria-label":"Следующая страница",onClick:t[1]||(t[1]=(0,o.iM)((e=>l.paginate(l.page+1)),["prevent"]))},Ke,10,He)])])}var Ne={props:{modelValue:{type:Number,require:!0,validate:e=>e<1&&e>(void 0).pages},count:{type:Number,require:!0,validate:e=>e<1},perPage:{type:Number,require:!0,validate:e=>e<1}},computed:{page(){return Number(this.modelValue)},pages(){return Math.ceil(this.count/this.perPage)},thresholdBottom(){return this.page<=1&&"disabled"},thresholdTop(){return this.page>=this.pages&&"disabled"}},methods:{paginate(e){this.$emit("update:modelValue",e)}}};const Ye=(0,re.Z)(Ne,[["render",je]]);var Ze=Ye;const Ge=e=>((0,a.dD)("data-v-48306ed2"),e=e(),(0,a.Cn)(),e),Re={class:"filter__title",ref:"formTitle"},Qe={class:"form__block"},Je=Ge((()=>(0,a._)("legend",{class:"form__legend"},"Цена",-1))),Xe={class:"form__label form__label--price"},et=Ge((()=>(0,a._)("span",{class:"form__value"},"От",-1))),tt={class:"form__label form__label--price"},rt=Ge((()=>(0,a._)("span",{class:"form__value"},"До",-1))),ot={class:"form__block"},at=Ge((()=>(0,a._)("legend",{class:"form__legend"},"Категория",-1))),st={class:"form__label form__label--select"},it=Ge((()=>(0,a._)("option",{value:"0"},"Все категории",-1))),nt=["value"],lt={class:"form__block"},ct=Ge((()=>(0,a._)("legend",{class:"form__legend"},"Цвет",-1))),dt={class:"colors"},ut={class:"colors__label"},pt=["name","value"],mt={class:"form__legend"},ft={key:0,class:"check-list"},_t={class:"check-list__label"},ht=["name","value","onChange"],gt={class:"check-list__desc"},yt=(0,a.Uk)(" Применить "),vt=(0,a.Uk)(" Сбросить ");function bt(e,t,r,s,n,l){const c=(0,a.up)("BaseButtonPrimary"),d=(0,a.up)("BaseButtonSecondary");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("h2",Re,"Фильтры",512),(0,a._)("form",(0,a.dG)(e.$attrs,{class:"filter__form form",action:"#",method:"get",onSubmit:t[6]||(t[6]=(0,o.iM)((e=>l.submit()),["prevent"])),ref:"form"}),[(0,a._)("fieldset",Qe,[Je,(0,a._)("label",Xe,[(0,a.wy)((0,a._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":t[0]||(t[0]=e=>n.currentPriceFrom=e)},null,512),[[o.nr,n.currentPriceFrom,void 0,{number:!0}]]),et]),(0,a._)("label",tt,[(0,a.wy)((0,a._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":t[1]||(t[1]=e=>n.currentPriceTo=e)},null,512),[[o.nr,n.currentPriceTo,void 0,{number:!0}]]),rt])]),(0,a._)("fieldset",ot,[at,(0,a._)("label",st,[(0,a.wy)((0,a._)("select",{class:"form__select",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>n.currentCategoryId=e),onChange:t[3]||(t[3]=e=>l.updateFilter())},[it,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.categories,(e=>((0,a.wg)(),(0,a.iD)("option",{value:e.id,key:e.id},(0,i.zw)(e.title),9,nt)))),128))],544),[[o.bM,n.currentCategoryId,void 0,{number:!0}]])])]),(0,a._)("fieldset",lt,[ct,(0,a._)("ul",dt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.colors,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"colors__item",key:e.id},[(0,a._)("label",ut,[(0,a.wy)((0,a._)("input",{class:"colors__radio sr-only",type:"radio",name:e.title,value:e.id,"onUpdate:modelValue":t[4]||(t[4]=e=>n.currentColorId=e)},null,8,pt),[[o.G2,n.currentColorId,void 0,{number:!0}]]),(0,a._)("span",{class:"colors__value",style:(0,i.j5)(l.doStyle(e.code))},null,4)])])))),128))])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.currentProps,(e=>((0,a.wg)(),(0,a.iD)("fieldset",{class:"form__block",key:e.id},[(0,a._)("legend",mt,(0,i.zw)(e.title),1),e?((0,a.wg)(),(0,a.iD)("ul",ft,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.availableValues,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"check-list__item",key:t.value},[(0,a._)("label",_t,[(0,a._)("input",{class:"check-list__check sr-only",type:"checkbox",name:t.value,value:t.value,onChange:r=>l.setProp(e.code,t.value)},null,40,ht),(0,a._)("span",gt,[(0,a.Uk)((0,i.zw)(t.value)+" ",1),(0,a._)("span",null,"("+(0,i.zw)(t.productsCount)+")",1)])])])))),128))])):(0,a.kq)("",!0)])))),128)),(0,a.Wm)(c,{class:"filter__submit",type:"submit"},{default:(0,a.w5)((()=>[yt])),_:1}),(0,a.Wm)(d,{class:"filter__reset",type:"button",onClick:t[5]||(t[5]=e=>l.reset())},{default:(0,a.w5)((()=>[vt])),_:1})],16),(0,a.WI)(e.$slots,"default",{},void 0,!0)],64)}var wt=r(669),kt=r.n(wt);const Pt="https://vue-tzr.skillbox.cc",Ct={class:"circle",ref:"circleButton"};function It(e,t,r,o,s,i){return(0,a.wg)(),(0,a.iD)("button",(0,a.dG)(e.$attrs,{class:"button button--second button__circle",onClick:t[0]||(t[0]=t=>{i.buttonCircle(t,e.$refs.circleButton)})}),[(0,a._)("span",Ct,null,512),(0,a.WI)(e.$slots,"default",{},void 0,!0)],16)}var xt={data(){return{}},methods:{buttonCircle:ce}};const Tt=(0,re.Z)(xt,[["render",It],["__scopeId","data-v-72010f0e"]]);var Dt=Tt,Ot={components:{BaseButtonPrimary:pe,BaseButtonSecondary:Dt},props:{priceFrom:{type:Number,require:!0},priceTo:{type:Number,require:!0},categoryId:{type:Number,require:!0},colorId:{type:Number,require:!0},categoryEntries:{require:!0}},emits:["update:priceFrom","update:priceTo","update:categoryId","update:colorId","update:categoryEntries"],data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColorId:0,categoriesData:null,currentProps:null,currentPropsEntries:{}}},watch:{priceFrom(e){this.currentPriceFrom=e},priceTo(e){this.currentPriceTo=e},categoryId(e){this.currentCategoryId=e},colorId(e){this.currentColorId=e},categoryEntries(e){this.currentPropsEntries=e}},methods:{buttonCircle:ce,animateFilterElements:Oe,submit(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:colorId",this.currentColorId),this.$emit("update:categoryEntries",this.currentPropsEntries),console.log("submit")},reset(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:colorId",0),this.$emit("update:categoryEntries",{}),this.currentProps=null},loadCategories(){kt().get(`${Pt}/api/productCategories`).then((e=>this.categoriesData=e.data))},doStyle(e){return`background-color: ${e};`},updateFilter(){kt().get(`${Pt}/api/productCategories/${this.currentCategoryId}`).then((e=>{this.currentProps=e.data.productProps,this.currentPropsEntries={}}))},setProp(e,t){const r=this.currentPropsEntries[e];if(r){const e=r.findIndex((e=>e===t));-1!==e?r.splice(e,1):r.push(t)}else this.currentPropsEntries[e]=[t]}},computed:{categories(){return this.categoriesData?this.categoriesData.items:[]},colors(){return this.$store.getters.colors}},created(){this.loadCategories()},mounted(){const{formTitle:e,form:t}=this.$refs;this.animateFilterElements([e,t])}};const Lt=(0,re.Z)(Ot,[["render",bt],["__scopeId","data-v-48306ed2"]]);var Ft=Lt;const St={class:"loader-container"},$t=(0,a.uE)('<div class="loader" data-v-23727aba><div class="loader__bar" data-v-23727aba></div><div class="loader__bar" data-v-23727aba></div><div class="loader__bar" data-v-23727aba></div><div class="loader__bar" data-v-23727aba></div><div class="loader__bar" data-v-23727aba></div><div class="loader__ball" data-v-23727aba></div></div>',1),Bt=[$t];function Vt(e,t){return(0,a.wg)(),(0,a.iD)("div",St,Bt)}const Ut={},At=(0,re.Z)(Ut,[["render",Vt],["__scopeId","data-v-23727aba"]]);var Et=At;function zt(e){const t=Math.abs(e)%100,r=e%10;return t>10&&t<20?"товаров":r>1&&r<5?"товара":1===r?"товар":"товаров"}function qt(e,t){const r=ne.p8.timeline();r.to(e,{x:100,duration:.5,ease:"power"}).to(t,{x:-400,duration:.4,ease:"power3",opacity:0},"-=0.4").to(e,{x:0,duration:1,opacity:1})}function Wt(e,{yFrom:t,yTo:r,xFrom:o,xTo:a},s=!0){console.log("animate");const i={},n={};o&&(i.x=o),t&&(i.y=t),a&&(n.x=a),r&&(n.y=r);const l=ne.p8.timeline();return l.fromTo(e,{...i,opacity:s?0:1},{duration:.7,...n,opacity:s?1:0})}function Ht(e){const t=ne.p8.timeline();t.fromTo(e,{opacity:0},{opacity:1,duration:1})}function Mt(e){const t=ne.p8.timeline();return t.fromTo(e,{opacity:1,y:0},{opacity:0,duration:.4,y:200})}var Kt={components:{ProductList:Be,BasePagination:Ze,ProductFilter:Ft,BaseLoader:Et,BaseButtonPrimary:pe},data(){return{filterPriceFrom:0,filterPriceTo:0,filterCategeryId:0,filterCategeryPropsEntries:{},filterColorId:0,page:1,productsPerPage:9,productsData:null,productsLoading:!0,productsLoadingFailed:!1,productsOpened:!0,pictureIsLoad:!1,chosenProductId:null,doUpdateProducts:!1}},computed:{products(){return this.productsData?this.productsData.items.map((e=>({...e,image:e.preview.file.url}))):[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},methods:{buttonCircle:ce,declensionWord:zt,loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,this.productsOpened=!1;const e={};if(0!==Object.keys(this.filterCategeryPropsEntries).length)for(const[r,o]of Object.entries(this.filterCategeryPropsEntries)){const t=`props[${r}][]`;o.forEach((r=>{e[t]=r}))}const t={...e};this.filterCategeryId&&(t.categoryId=this.filterCategeryId),this.filterPriceFrom&&(t.minPrice=this.filterPriceFrom),this.filterPriceTo&&(t.maxPrice=this.filterPriceTo),kt().get(`${Pt}/api/products`,{params:{page:this.page,limit:this.productsPerPage,...t}}).then((e=>{this.productsData=e.data})).catch((()=>this.productsLoadingFailed=!0)).then((()=>{this.productsLoading=!1,this.productsOpened=!0,this.doUpdateProducts=!1}))},animatePageHandler:De},watch:{page(){this.doUpdateProducts=!0},filterPriceFrom(){this.doUpdateProducts=!0},filterPriceTo(){this.doUpdateProducts=!0},filterCategeryId(){this.doUpdateProducts=!0},productsPerPage(){this.doUpdateProducts=!0},filterCategeryPropsEntries:{handler(){this.doUpdateProducts=!0},deep:!0},filterColorId(){this.doUpdateProducts=!0},doUpdateProducts(e){e&&this.loadProducts()}},beforeRouteLeave(e,t,r){const{catalog:o}=this.$refs;if("cart"===e.name){const e=document.querySelector(".header__cart");qt(e,o),setTimeout((()=>{r()}),700)}"product"===e.name&&(Fe(o),setTimeout((()=>{r()}),400))},created(){this.loadProducts()},mounted(){const{pageHandler:e}=this.$refs;this.animatePageHandler(e)}};const jt=(0,re.Z)(Kt,[["render",P],["__scopeId","data-v-48eec343"]]);var Nt=jt;const Yt=e=>((0,a.dD)("data-v-13a55d9f"),e=e(),(0,a.Cn)(),e),Zt={key:1,class:"content container"},Gt={class:""},Rt=(0,a.Uk)(" Произошла ошибка... "),Qt={key:2,class:"content container",ref:"entireContent"},Jt={class:"content__top",ref:"breadcrumbs"},Xt={class:"breadcrumbs"},er={class:"breadcrumbs__item"},tr=(0,a.Uk)(" Каталог "),rr={class:"breadcrumbs__item"},or={class:"breadcrumbs__item"},ar={class:"breadcrumbs__link"},sr={class:"item",ref:"cartBlock"},ir={class:"item__pics pics"},nr={class:"pics__wrapper"},lr={style:{width:"570px",height:"570px"},ref:"loader"},cr=["src","alt"],dr={class:"item__info"},ur={class:"item__code"},pr={class:"item__title"},mr={class:"item__form"},fr={class:"item__price"},_r={class:"form__block"},hr={class:"form__legend"},gr={class:"form__block"},yr=Yt((()=>(0,a._)("legend",{class:"form__legend"},"Цвет (Обязательно)",-1))),vr={class:"item__row"},br={class:"form__counter"},wr=Yt((()=>(0,a._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-minus"})],-1))),kr=[wr],Pr=Yt((()=>(0,a._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-plus"})],-1))),Cr=[Pr],Ir=(0,a.Uk)(" В корзину "),xr={key:0,class:"notification-cart"},Tr={width:"50",height:"50",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 50 50",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},Dr=Yt((()=>(0,a._)("circle",{style:{fill:"#8be000"},cx:"25",cy:"25",r:"25"},null,-1))),Or=Yt((()=>(0,a._)("polyline",{style:{fill:"none",stroke:"#272727","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10"},points:"\n                    38,15 22,33 12,25 "},null,-1))),Lr=[Dr,Or],Fr=Yt((()=>(0,a._)("span",{class:"notification-cart__message"},[(0,a._)("span",null," Товар добавлен в корзину ")],-1))),Sr=(0,a.Uk)("Перейти в коризну"),$r={key:1,class:"notification-cart"},Br={width:"50",height:"50",style:{overflow:"visible","enable-background":"new 0 0 32 32"},viewBox:"0 0 32 32","xml:space":"preserve",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Vr=Yt((()=>(0,a._)("circle",{cx:"16",cy:"16",id:"BG",r:"16",style:{fill:"#d72828"}},null,-1))),Ur=Yt((()=>(0,a._)("path",{d:"M14.5,25h3v-3h-3V25z M14.5,6v13h3V6H14.5z",id:"Exclamatory_x5F_Sign",style:{fill:"#272727"}},null,-1))),Ar=[Vr,Ur],Er={class:"notification-cart__message"},zr={class:"item__desc"},qr={class:"tabs"},Wr={class:"tabs__item"},Hr={class:"tabs__item"},Mr={class:"tabs__item"},Kr={class:"tabs__item"},jr={class:"tabs__list"},Nr={class:"item__content item__content--active",ref:"targetDescription"},Yr=Yt((()=>(0,a._)("p",null,"Доступен в расцветках:",-1))),Zr={class:"item__content",ref:"targetCharacteristics"},Gr={class:"item__content",ref:"targetWarranty"},Rr={class:"item__content",ref:"targetDelivery"};function Qr(e,t,r,s,n,l){const c=(0,a.up)("BaseLoader"),d=(0,a.up)("router-link"),u=(0,a.up)("BaseLoaderCircle"),p=(0,a.up)("ProductProp"),m=(0,a.up)("BaseButtonPrimary"),f=(0,a.up)("BaseNotification");return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.productStatus.isLoading?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"content container"})):e.productStatus.isFailed?((0,a.wg)(),(0,a.iD)("main",Zt,[(0,a._)("div",Gt,[Rt,(0,a._)("button",{onClick:t[0]||(t[0]=(0,o.iM)(((...t)=>e.loadProducts&&e.loadProducts(...t)),["prevent"]))},"Перезагрузить")])])):(0,a.kq)("",!0),e.productStatus.isLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("main",Qt,[(0,a._)("div",Jt,[(0,a._)("ul",Xt,[(0,a._)("li",er,[(0,a.Wm)(d,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,a.w5)((()=>[tr])),_:1})]),(0,a._)("li",rr,[(0,a.Wm)(d,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.category.title),1)])),_:1})]),(0,a._)("li",or,[(0,a._)("a",ar,(0,i.zw)(e.product.title),1)])])],512),(0,a._)("section",sr,[(0,a._)("div",ir,[(0,a._)("div",nr,[(0,a._)("div",lr,[(0,a.Wm)(u)],512),(0,a._)("img",{width:"570",height:"570",src:e.product.image,alt:e.product.title,ref:"image"},null,8,cr)])]),(0,a._)("div",dr,[(0,a._)("span",ur,"Артикул: "+(0,i.zw)(e.currentOffer?e.currentOffer.id:e.product.productId),1),(0,a._)("h2",pr,(0,i.zw)(e.currentOffer?e.currentOffer.title:e.product.title)+" "+(0,i.zw)(e.currentColorOffer?e.currentColorOffer:""),1),(0,a._)("div",mr,[(0,a._)("form",{class:"form",action:"#",method:"POST",onSubmit:t[6]||(t[6]=(0,o.iM)((t=>e.doAddToCart(e.currentOffer,e.currentColorOffer)),["prevent"]))},[(0,a._)("b",fr,(0,i.zw)(e.currentOffer?e.numberFormat(e.currentOffer.price):e.product.pricePretty)+" ₽ ",1),(0,a._)("fieldset",_r,[(0,a._)("legend",hr,(0,i.zw)(e.propTitle)+" (Обязательно)",1),(0,a.Wm)(p,{"available-params":e.availableParams,productId:e.product.productId,property:e.product.mainProp,"chosen-property":e.currentProperty,"onUpdate:chosen-property":t[1]||(t[1]=t=>e.currentProperty=t)},null,8,["available-params","productId","property","chosen-property"])]),(0,a._)("fieldset",gr,[yr,(0,a.Wm)(p,{"available-params":e.colorsOffer,productId:e.product.productId,property:"color","chosen-property":e.currentColorOffer,"onUpdate:chosen-property":t[2]||(t[2]=t=>e.currentColorOffer=t)},null,8,["available-params","productId","chosen-property"])]),(0,a._)("div",vr,[(0,a._)("div",br,[(0,a._)("button",{type:"button","aria-label":"Убрать один товар",onClick:t[3]||(t[3]=t=>e.productAmount--)},kr),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=t=>e.productAmount=t)},null,512),[[o.nr,e.productAmount,void 0,{number:!0}]]),(0,a._)("button",{type:"button","aria-label":"Добавить один товар",onClick:t[5]||(t[5]=t=>e.productAmount++)},Cr)]),(0,a.Wm)(m,{type:"submit",disabled:e.productStatus.addSending},{default:(0,a.w5)((()=>[Ir])),_:1},8,["disabled"])]),(0,a.Wm)(f,{finish:e.addingStatus.added||e.addingStatus.error,loading:e.addingStatus.addSending},{default:(0,a.w5)((()=>[e.addingStatus.added?((0,a.wg)(),(0,a.iD)("div",xr,[((0,a.wg)(),(0,a.iD)("svg",Tr,Lr)),Fr,(0,a.Wm)(d,{to:{name:"cart"},class:"notification-cart__link"},{default:(0,a.w5)((()=>[Sr])),_:1})])):e.addingStatus.error?((0,a.wg)(),(0,a.iD)("div",$r,[((0,a.wg)(),(0,a.iD)("svg",Br,Ar)),(0,a._)("span",Er,[(0,a._)("span",null,(0,i.zw)(e.addingStatus.text),1)])])):(0,a.kq)("",!0)])),_:1},8,["finish","loading"])],32)])]),(0,a._)("div",zr,[(0,a._)("ul",qr,[(0,a._)("li",Wr,[(0,a._)("a",{class:(0,i.C_)(["tabs__link",{"tabs__link--current":"description"===e.tab}]),href:"#",onClick:t[7]||(t[7]=(0,o.iM)((t=>e.tab="description"),["prevent"]))}," Описание ",2)]),(0,a._)("li",Hr,[(0,a._)("a",{class:(0,i.C_)(["tabs__link",{"tabs__link--current":"characteristics"===e.tab}]),href:"#",onClick:t[8]||(t[8]=(0,o.iM)((t=>e.tab="characteristics"),["prevent"]))}," Характеристики ",2)]),(0,a._)("li",Mr,[(0,a._)("a",{class:(0,i.C_)(["tabs__link",{"tabs__link--current":"warranty"===e.tab}]),href:"#",onClick:t[9]||(t[9]=(0,o.iM)((t=>e.tab="warranty"),["prevent"]))}," Гарантия ",2)]),(0,a._)("li",Kr,[(0,a._)("a",{class:(0,i.C_)(["tabs__link",{"tabs__link--current":"delivery"===e.tab}]),href:"#",onClick:t[10]||(t[10]=(0,o.iM)((t=>e.tab="delivery"),["prevent"]))}," Оплата и доставка ",2)])]),(0,a._)("ul",jr,[(0,a._)("li",Nr,[(0,a._)("h3",null,(0,i.zw)(e.product.title),1),Yr,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.product.offers,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},(0,i.zw)(e.propValues[0].value),1)))),128))]),(0,a._)("a",{href:"#",onClick:t[11]||(t[11]=(0,o.iM)((t=>e.tab="characteristics"),["prevent"]))}," Все характеристики ")],512),(0,a._)("li",Zr,[(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.product.specifications,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},(0,i.zw)(e.title)+" - "+(0,i.zw)(e.value),1)))),128))])],512),(0,a._)("li",Gr," loremloremloremloremloremloremloremloremloremlorem ",512),(0,a._)("li",Rr," loremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremloremlorem ",512)])])],512)],512))],64)}var Jr=r(262);function Xr(){const e=(0,Jr.iH)(null),t=(0,a.Fl)((()=>e.value.category)),r=(0,Jr.qj)({isLoading:!0,isFailed:!1}),o=t=>{r.isLoading=!0,r.isFailed=!1,kt().get(`${Pt}/api/products/${t}`).then((t=>{const r=t.data;e.value={pricePretty:me(r.price),price:r.price,colors:r.colors,specifications:r.specifications,image:r.preview.file.url,mainProp:r.mainProp.code,offers:r.offers,productId:r.id,title:r.title,category:r.category}})).catch((()=>{r.isFailed=!0})).then((()=>{r.isLoading=!1}))};return{product:e,category:t,fetchProduct:o,status:r}}var eo=r(907);function to(){const e=(0,Jr.iH)(!1),t=(0,Jr.qj)({added:!1,addSending:!1,error:!1,text:null,field:null}),r=(0,Jr.iH)(1),o=(0,eo.oR)(),a=(a,s)=>{if(t.added=!1,t.addSending=!0,t.error=!1,s&&a){const i=a.id,n=o.getters.colors.find((e=>e.title===s)).id;o.dispatch("addProductToCart",{productId:i,chosenColor:n,amount:r.value}).then((()=>{const r=o.getters.cartStatusError;r.status?(t.error=!0,t.addSending=!1,t.text=r.textError,t.added=!1):(e.value=!0,t.added=!0,t.addSending=!1)})).catch((()=>{t.error=!0,t.addSending=!1}))}else setTimeout((()=>{t.error=!0,t.addSending=!1,t.text="Укажите все параметры"}),0)};return{doAddToCart:a,isShowAddedMessage:e,status:t,productAmount:r}}function ro(e){const t=(0,eo.oR)(),r=(0,s.yj)(),o=(0,Jr.iH)(null),i=(0,Jr.iH)(null),n=(0,a.Fl)((()=>t.getters.chosenOffers.find((e=>e.productId?e.productId===+r.params.id:null)))),l=(0,a.Fl)((()=>e.value?e.value.offers[0].propValues[0].productProp.title:"")),c=(0,a.Fl)((()=>e.value?e.value.colors.map((e=>({offerProp:e.color.title,offerValue:{color:{code:e.color.code}}}))):[])),d=(0,a.Fl)((()=>o.value?e.value.offers.find((e=>e.propValues[0].value===o.value)):n.value?(o.value=n.value.offer.propValues[0].value,n.value.offer):null)),u=(0,a.Fl)((()=>e.value.offers.map((t=>({offerProp:t.propValues[0].value,offerValue:e.value.colors.find((e=>e.color.title.replaceAll("ё","е")===t.propValues[0].value))})))));return(0,a.YP)(d,(()=>{d.value&&t.commit("addChosenOffers",{offer:d.value,productId:e.value.productId})}),{deep:!0}),{currentProperty:o,currentColorOffer:i,currentOffer:d,propTitle:l,colorsOffer:c,availableParams:u}}function oo(e,t,r){const o=ne.p8.timeline(),a=r?{from:600,to:-600}:{from:-600,to:600};e.forEach(((e,t)=>{0!==t&&o.fromTo(e.tab,{x:a.from,display:"none"},{display:"block",x:0,duration:.2,ease:"none"}),o.fromTo(e.tab,{x:0},{display:"none",x:a.to,duration:.2,ease:"none"}),e.tab.classList.remove("item__content--active")})),o.fromTo(t,{x:a.from},{x:-600*e.lenght,display:"block",duration:.2,ease:"circ"}).add((()=>t.classList.add("item__content--active")))}function ao(e){const t=ne.p8.timeline();t.fromTo(e,{opacity:0},{display:"block",opacity:1,duration:.8})}function so(e){const t=ne.p8.timeline();t.to(e,{x:"+=10",yoyo:!0,repeat:1,duration:.2}).to(e,{x:0,duration:.2})}function io(){const e=(0,Jr.iH)(null),t=(0,Jr.iH)(null);function r(){const r=new Image;r.onload=()=>{t.value.remove(),e.value.src=r.src,ao(e.value)},e.value.style.display="none",r.src=e.value.src}return{image:e,loader:t,doImplementation:r}}function no(){const e=(0,Jr.iH)("description"),t=(0,Jr.iH)("description"),r=(0,Jr.iH)(null),o=(0,Jr.iH)(null),a=(0,Jr.iH)(null),s=(0,Jr.iH)(null),i={header:"description",tab:r.value},n={header:"characteristics",tab:o.value},l={header:"warranty",tab:a.value},c={header:"delivery",tab:s.value};function d(){let d=!0,u=[];i.tab=r.value,n.tab=o.value,l.tab=a.value,c.tab=s.value;const p=[i,n,l,c],m=p.findIndex((t=>t.header===e.value)),f=p.findIndex((e=>e.header===t.value)),_=p.find((t=>t.header===e.value));if(m>f&&(u=p.slice(Math.min(m,f),Math.max(m,f))),f>m)for(let e=f;e>m;e--)u.push(p[e]),d=!1;t.value!==e.value&&(oo(u,_.tab,d),t.value=e.value)}return{tab:e,lastTab:t,targetDescription:r,targetCharacteristics:o,targetWarranty:a,targetDelivery:s,calculateTab:d}}var lo=(0,a.aZ)({components:{BaseLoader:Et,BaseNotification:Ce,ProductProp:ye,BaseLoaderCircle:ae,BaseButtonPrimary:pe},methods:{},setup(){const e=(0,s.yj)(),t=(0,Jr.iH)(null),r=(0,Jr.iH)(null),o=(0,Jr.iH)(null),i=(0,Jr.iH)(null),{product:n,category:l,fetchProduct:c,status:d}=Xr();c(e.params.id);const{currentProperty:u,currentColorOffer:p,currentOffer:m,propTitle:f,colorsOffer:_,availableParams:h}=ro(n),{doAddToCart:g,isShowAddedMessage:y,status:v,productAmount:b}=to(),{tab:w,targetDescription:k,targetCharacteristics:P,targetWarranty:C,targetDelivery:I,calculateTab:x}=no(),{image:T,loader:D,doImplementation:O}=io();return(0,a.ic)((()=>{x()})),(0,a.bv)((()=>{r.value?"main"===r.value?Wt(t.value,{yFrom:200,yTo:"0"},!0):"cart"===r.value&&Wt(t.value,{xFrom:-200,xTo:"0"},!0):Ht(t.value)})),(0,s.iS)(((e,r,o)=>{if("cart"===e.name){const e=document.querySelector(".header__cart");qt(e,t.value),setTimeout((()=>{o()}),700)}else Mt(t.value),setTimeout((()=>{o()}),400)})),(0,a.YP)(d,(async()=>{d.isLoading||(await(0,a.Y3)(),r.value?"main"===r.value?Wt(t.value,{yFrom:200,yTo:"0"},!0):"cart"===r.value&&Wt(t.value,{xFrom:-200,xTo:"0"},!0):Ht(t.value),O())}),{immediate:!0,deep:!0}),(0,a.YP)(v,(()=>{if(console.log(v),v.error){const e=document.querySelectorAll(".form__block");so(e)}}),{immediate:!0,deep:!0}),(0,a.YP)(b,(()=>{b.value<1&&(b.value=1)})),{breadcrumbs:o,cartBlock:i,pathFrom:r,productAmount:b,entireContent:t,currentProperty:u,currentColorOffer:p,productStatus:d,addingStatus:v,product:n,category:l,currentOffer:m,propTitle:f,colorsOffer:_,image:T,loader:D,isShowAddedMessage:y,doAddToCart:g,numberFormat:me,availableParams:h,tab:w,targetCharacteristics:P,targetDescription:k,targetWarranty:C,targetDelivery:I}},beforeRouteEnter(e,t,r){r((e=>{e.pathFrom=t.name}))}});const co=(0,re.Z)(lo,[["render",Qr],["__scopeId","data-v-13a55d9f"]]);var uo=co;function po(e,t,r,o,s,i){return(0,a.wg)(),(0,a.iD)("h1",null,"Страница не найдена")}var mo={};const fo=(0,re.Z)(mo,[["render",po]]);var _o=fo;const ho=e=>((0,a.dD)("data-v-4abeddc0"),e=e(),(0,a.Cn)(),e),go={key:1,class:"content container",ref:"entireContent"},yo={class:"content__top",ref:"breadcrumbs"},vo={class:"breadcrumbs"},bo={class:"breadcrumbs__item"},wo=(0,a.Uk)(" Каталог "),ko=ho((()=>(0,a._)("li",{class:"breadcrumbs__item"},[(0,a._)("a",{class:"breadcrumbs__link"}," Корзина ")],-1))),Po=ho((()=>(0,a._)("h1",{class:"content__title"}," Корзина ",-1))),Co={class:"content__info"},Io={class:"cart"},xo={class:"cart__form form",action:"#",method:"POST"},To={class:"cart__field",ref:"form"},Do={class:"cart__list"},Oo={class:"cart__block",ref:"cartBlock"},Lo=ho((()=>(0,a._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1))),Fo={class:"cart__price"},So=(0,a.Uk)(" Итого: "),$o=(0,a.Uk)(" Оформить заказ ");function Bo(e,t,r,o,s,n){const l=(0,a.up)("BaseLoader"),c=(0,a.up)("router-link"),d=(0,a.up)("CartItem"),u=(0,a.up)("BaseButtonPrimary");return n.cartLoading?((0,a.wg)(),(0,a.j4)(l,{key:0,class:"content"})):n.cartLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("main",go,[(0,a._)("div",yo,[(0,a._)("ul",vo,[(0,a._)("li",bo,[(0,a.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,a.w5)((()=>[wo])),_:1})]),ko]),Po,(0,a._)("span",Co,(0,i.zw)(e.totalAmount)+" "+(0,i.zw)(n.declensionWord(e.totalAmount)),1)],512),(0,a._)("section",Io,[(0,a._)("form",xo,[(0,a._)("div",To,[(0,a._)("ul",Do,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.offers,(e=>((0,a.wg)(),(0,a.j4)(d,{offer:e,key:e.offerCartId},null,8,["offer"])))),128))])],512),(0,a._)("div",Oo,[Lo,(0,a._)("p",Fo,[So,(0,a._)("span",null,(0,i.zw)(n.numberFormat(this.totalPrice))+" ₽",1)]),(0,a.Wm)(c,{to:{name:"order"},custom:""},{default:(0,a.w5)((({navigate:t})=>[(0,a.Wm)(u,{class:"cart__button",type:"button",disabled:!e.totalAmount,onClick:t},{default:(0,a.w5)((()=>[$o])),_:2},1032,["disabled","onClick"])])),_:1})],512)])])],512))}const Vo=e=>((0,a.dD)("data-v-95b018fc"),e=e(),(0,a.Cn)(),e),Uo={key:0,class:"cart__item product"},Ao={key:1,class:"cart__item product"},Eo={class:"product__pic"},zo=["src","alt"],qo={class:"product__title"},Wo={class:"product__color"},Ho=Vo((()=>(0,a._)("span",{class:"colors__title"},"Цвет:",-1))),Mo={class:"product__code"},Ko={class:"product__counter form__counter"},jo=Vo((()=>(0,a._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-minus"})],-1))),No=[jo],Yo=Vo((()=>(0,a._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-plus"})],-1))),Zo=[Yo],Go={class:"product__price"},Ro=Vo((()=>(0,a._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-close"})],-1))),Qo=[Ro];function Jo(e,t,r,s,n,l){const c=(0,a.up)("BaseLoaderCircle"),d=(0,a.up)("router-link");return l.offerLoadingStatus?((0,a.wg)(),(0,a.iD)("li",Uo,[(0,a.Wm)(c,{class:"cart__item--loading"})])):l.offerLoadingStatus?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("li",Ao,[(0,a._)("div",Eo,[(0,a._)("img",{src:r.offer.image,width:"120",height:"120",alt:r.offer.offerTitle},null,8,zo)]),(0,a._)("h3",qo,[(0,a.Wm)(d,{to:{name:"product",params:{id:r.offer.productId}},style:{color:"#222"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(r.offer.offerTitle),1)])),_:1},8,["to"])]),(0,a._)("span",null,(0,i.zw)(r.offer.productProp[0].value),1),(0,a._)("div",Wo,[Ho,(0,a._)("span",{class:"colors__value",style:(0,i.j5)(l.color)},null,4)]),(0,a._)("span",Mo," Артикул: "+(0,i.zw)(r.offer.offerId),1),(0,a._)("div",Ko,[(0,a._)("button",{type:"button","aria-label":"Убрать один товар",onClick:t[0]||(t[0]=(0,o.iM)((e=>l.removeProduct()),["prevent"]))},No),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.amount=e),name:"count"},null,512),[[o.nr,l.amount,void 0,{number:!0}]]),(0,a._)("button",{type:"button","aria-label":"Добавить один товар",onClick:t[2]||(t[2]=(0,o.iM)((e=>l.addProduct()),["prevent"]))},Zo)]),(0,a._)("b",Go,(0,i.zw)(l.numberFormat(this.offer.amount*this.offer.offerPrice))+" ₽ ",1),(0,a._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:t[3]||(t[3]=(0,o.iM)((t=>e.deleteProduct(r.offer.offerCartId)),["prevent"]))},Qo)]))}var Xo={props:{offer:{required:!0,validator:e=>x(e,["color","productPrice","offerPrice","amount","productId","offerCartId","offerId","image","offerTitle","productProp"])}},components:{BaseLoaderCircle:ae},computed:{color(){return"#ffffff"===this.offer.color.code?"background-color: #e9e9e9;":`background-color: ${this.offer.color.code};`},offerLoadingStatus(){const e=this.$store.getters.cartItemLoading.find((e=>e.offerCartId===this.offer.offerCartId));return e?e.status:null},amount:{get(){return this.offer.amount},set(e){clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.updateCartProductAmount({productId:this.offer.offerCartId,amount:e})}),500)}}},methods:{numberFormat:me,...(0,eo.nv)({updateCartProductAmount:"updateCartProductAmount",deleteProduct:"deleteProduct"}),addProduct(){this.updateCartProductAmount({productId:this.offer.offerCartId,amount:this.offer.amount+1})},removeProduct(){this.updateCartProductAmount({productId:this.offer.offerCartId,amount:this.offer.amount-1})}}};const ea=(0,re.Z)(Xo,[["render",Jo],["__scopeId","data-v-95b018fc"]]);var ta=ea,ra={components:{CartItem:ta,BaseLoader:Et,BaseButtonPrimary:pe},data(){return{pathFrom:null}},computed:{...(0,eo.Se)({offers:"cartProductsData",totalPrice:"cartTotalPrice",totalAmount:"cartTotalAmount"}),cartLoading(){return this.$store.state.cartLoading}},methods:{numberFormat:me,declensionWord:zt},async mounted(){await(0,a.Y3)();const{entireContent:e}=this.$refs;"order"===this.pathFrom?Wt(e,{xFrom:-400,xTo:"0"},!0):"product"===this.pathFrom||"main"===this.pathFrom?Wt(e,{xFrom:400,xTo:"0"},!0):Ht(e)},beforeRouteEnter(e,t,r){r((e=>{e.pathFrom=t.name}))},beforeRouteLeave(e,t,r){const{entireContent:o}=this.$refs;"product"!==e.name&&"main"!==e.name||(Wt(o,{xFrom:"0",xTo:400},!1),setTimeout((()=>{r()}),1e3)),"order"===e.name&&(Wt(o,{xFrom:"0",xTo:-400},!1),setTimeout((()=>{r()}),1e3))}};const oa=(0,re.Z)(ra,[["render",Bo],["__scopeId","data-v-4abeddc0"]]);var aa=oa;const sa={class:"content container",ref:"entireContent"},ia={class:"content__top"},na={class:"breadcrumbs"},la={class:"breadcrumbs__item"},ca=(0,a.Uk)(" Каталог "),da={class:"breadcrumbs__item"},ua=(0,a.Uk)(" Корзина "),pa=(0,a._)("li",{class:"breadcrumbs__item"},[(0,a._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),ma=(0,a._)("h1",{class:"content__title"}," Корзина ",-1),fa={class:"content__info"},_a={class:"cart"},ha={class:"cart__field"},ga={class:"cart__data"},ya={class:"cart__options"},va=(0,a._)("h3",{class:"cart__title"},"Доставка",-1),ba={class:"cart__options options"},wa={class:"options__label"},ka=["value"],Pa={class:"options__value"},Ca={key:0,class:"cart__title"},Ia={class:"cart__options options"},xa={key:0,class:"options__item"},Ta={key:0,class:"options__label"},Da=["value"],Oa={class:"options__value"},La=(0,a.Uk)(" Оформить заказ "),Fa={key:0,class:"cart__error form__error-block"},Sa=(0,a._)("h4",null,"Заявка не отправлена!",-1),$a={key:1,class:"cart__error form__error-block",style:{"border-color":"green"}},Ba=(0,a._)("h4",{style:{color:"green"}},"Заявка отправлена!",-1);function Va(e,t,r,s,n,l){const c=(0,a.up)("router-link"),d=(0,a.up)("BaseFormText"),u=(0,a.up)("BaseFormTextarea"),p=(0,a.up)("BaseLoaderCircle"),m=(0,a.up)("BaseButtonPrimary"),f=(0,a.up)("CartBlock");return(0,a.wg)(),(0,a.iD)("main",sa,[(0,a._)("div",ia,[(0,a._)("ul",na,[(0,a._)("li",la,[(0,a.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,a.w5)((()=>[ca])),_:1})]),(0,a._)("li",da,[(0,a.Wm)(c,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,a.w5)((()=>[ua])),_:1})]),pa]),ma,(0,a._)("span",fa,(0,i.zw)(e.cartTotalAmount)+" "+(0,i.zw)(l.declensionWord(e.cartTotalAmount)),1)]),(0,a._)("section",_a,[(0,a._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:t[7]||(t[7]=(0,o.iM)((e=>l.order()),["prevent"]))},[(0,a._)("div",ha,[(0,a._)("div",ga,[(0,a.Wm)(d,{modelValue:n.formData.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.formData.name=e),error:n.formError.name,title:"ФИО",placeholder:"Введите ваше полное имя"},null,8,["modelValue","error"]),(0,a.Wm)(d,{modelValue:n.formData.address,"onUpdate:modelValue":t[1]||(t[1]=e=>n.formData.address=e),error:n.formError.address,title:"Адрес доставки",placeholder:"Введите ваш адрес"},null,8,["modelValue","error"]),(0,a.Wm)(d,{modelValue:n.formData.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>n.formData.phone=e),error:n.formError.phone,title:"Телефон",placeholder:"Введите ваш телефон"},null,8,["modelValue","error"]),(0,a.Wm)(d,{modelValue:n.formData.email,"onUpdate:modelValue":t[3]||(t[3]=e=>n.formData.email=e),error:n.formError.email,title:"Email",placeholder:"Введи ваш Email"},null,8,["modelValue","error"]),(0,a.Wm)(u,{title:"Комментарий к заказу",error:n.formError.comment,modelValue:n.formData.comment,"onUpdate:modelValue":t[4]||(t[4]=e=>n.formData.comment=e),placeholder:"Ваши пожелания"},null,8,["error","modelValue"])]),(0,a._)("div",ya,[va,(0,a._)("ul",ba,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.availableDeliveries,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"options__item",key:e.id},[(0,a._)("label",wa,[(0,a.wy)((0,a._)("input",{class:"options__radio sr-only",type:"radio",name:"delivery",value:e.id,"onUpdate:modelValue":t[5]||(t[5]=e=>n.deliveryTypeId=e)},null,8,ka),[[o.G2,n.deliveryTypeId]]),(0,a._)("span",Pa,[(0,a.Uk)((0,i.zw)(e.title)+" ",1),(0,a._)("b",null,(0,i.zw)("0"===String(e.price)?"бесплатно":`${l.numberFormat(e.price)} ₽`),1)])])])))),128))]),n.deliveryTypeId?((0,a.wg)(),(0,a.iD)("h3",Ca,"Оплата")):(0,a.kq)("",!0),(0,a._)("ul",Ia,[n.paymentLoading?((0,a.wg)(),(0,a.iD)("li",xa,[(0,a.Wm)(p,{class:"cart__item--loading"})])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.availablePayments,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"options__item",key:e.id},[n.paymentLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("label",Ta,[(0,a.wy)((0,a._)("input",{class:"options__radio sr-only",type:"radio",name:"pay",value:e.id,"onUpdate:modelValue":t[6]||(t[6]=e=>n.paymentTypeId=e)},null,8,Da),[[o.G2,n.paymentTypeId]]),(0,a._)("span",Oa,(0,i.zw)(e.title),1)]))])))),128))])])]),(0,a.Wm)(f,{shipping:n.shippingСost,offers:e.offers,"total-price":e.totalPrice},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"cart__button",type:"submit",disabled:!e.cartTotalAmount||!n.paymentTypeId},{default:(0,a.w5)((()=>[La])),_:1},8,["disabled"])])),_:1},8,["shipping","offers","total-price"]),n.formErrorMessage?((0,a.wg)(),(0,a.iD)("div",Fa,[Sa,(0,a._)("p",null,(0,i.zw)(n.formErrorMessage),1)])):(0,a.kq)("",!0),n.messageSuccessOrder?((0,a.wg)(),(0,a.iD)("div",$a,[Ba,(0,a._)("p",null,(0,i.zw)(n.messageSuccessOrder),1)])):(0,a.kq)("",!0)],32)])],512)}const Ua=["placeholder"];function Aa(e,t,r,s,i,n){const l=(0,a.up)("BaseFormField");return(0,a.wg)(),(0,a.j4)(l,{title:e.title,error:e.error},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("input",{class:"form__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.dataValue=t),placeholder:e.placeholder},null,8,Ua),[[o.nr,e.dataValue]])])),_:1},8,["title","error"])}const Ea={class:"form__label"},za={class:"form__value"},qa={key:0,class:"form__error"};function Wa(e,t,r,o,s,n){return(0,a.wg)(),(0,a.iD)("label",Ea,[(0,a.WI)(e.$slots,"default"),(0,a._)("span",za,(0,i.zw)(r.title),1),r.error?((0,a.wg)(),(0,a.iD)("span",qa,(0,i.zw)(r.error),1)):(0,a.kq)("",!0)])}var Ha={props:["title","error"]};const Ma=(0,re.Z)(Ha,[["render",Wa]]);var Ka=Ma,ja={props:["title","error","placeholder","modelValue"],components:{BaseFormField:Ka},computed:{dataValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},Na={mixins:[ja]};const Ya=(0,re.Z)(Na,[["render",Aa]]);var Za=Ya;const Ga=["placeholder"];function Ra(e,t,r,s,i,n){const l=(0,a.up)("BaseFormField");return(0,a.wg)(),(0,a.j4)(l,{title:e.title,error:e.error},{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("textarea",{class:"form__input form__input--area",name:"comments","onUpdate:modelValue":t[0]||(t[0]=t=>e.dataValue=t),placeholder:e.placeholder},null,8,Ga),[[o.nr,e.dataValue]])])),_:1},8,["title","error"])}var Qa={mixins:[ja]};const Ja=(0,re.Z)(Qa,[["render",Ra]]);var Xa=Ja;const es={class:"cart__block"},ts={class:"cart__orders"},rs={class:"cart__order-article"},os={class:"cart__order-props"},as={class:"cart__order-amount"},ss={class:"cart__total"},is=(0,a.Uk)("Доставка: "),ns=(0,a.Uk)("Итого: ");function ls(e,t,r,o,s,n){const l=(0,a.up)("BaseLoaderCircle");return(0,a.wg)(),(0,a.iD)("div",es,[e.cartLoading?((0,a.wg)(),(0,a.j4)(l,{key:0})):(0,a.kq)("",!0),(0,a._)("ul",ts,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.offers,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"cart__order",key:e.offerId},[(0,a._)("h3",null,(0,i.zw)(e.offerTitle),1),(0,a._)("b",null,(0,i.zw)(n.numberFormat(e.offerPrice))+" ₽",1),(0,a._)("span",rs,"Артикул: "+(0,i.zw)(e.offerId),1),(0,a._)("span",os,(0,i.zw)(e.productProp[0].value)+" & "+(0,i.zw)(e.color.title),1),(0,a._)("span",as,"Количество товаров: "+(0,i.zw)(e.amount),1)])))),128))]),(0,a._)("div",ss,[(0,a._)("p",null,[is,(0,a._)("b",null,(0,i.zw)(0===Number(r.shipping)?"бесплатно":`${n.numberFormat(Number(r.shipping))} ₽`),1)]),(0,a._)("p",null,[ns,(0,a._)("b",null,(0,i.zw)(n.totalAmount),1),(0,a.Uk)(" "+(0,i.zw)(n.declensionWord(n.totalAmount))+" на сумму ",1),(0,a._)("b",null,(0,i.zw)(n.numberFormat(r.totalPrice))+" ₽",1)])]),(0,a.WI)(e.$slots,"default",{},void 0,!0)])}var cs={components:{BaseLoaderCircle:ae},props:{totalPrice:{required:!0,type:Number},offers:{required:!0},shipping:{required:!0,type:[Number,String]}},computed:{...(0,eo.Se)({cartLoading:"cartLoading"}),totalAmount(){return this.offers?this.offers.reduce(((e,t)=>e+t.amount),0):0}},methods:{numberFormat:me,declensionWord:zt}};const ds=(0,re.Z)(cs,[["render",ls],["__scopeId","data-v-46aca9e0"]]);var us=ds,ps={components:{BaseFormText:Za,BaseFormTextarea:Xa,CartBlock:us,BaseLoaderCircle:ae,BaseButtonPrimary:pe},data(){return{formData:{},formError:{},formErrorMessage:"",messageSuccessOrder:"",availableDeliveries:[],availablePayments:[],deliveryTypeId:null,paymentTypeId:null,paymentLoading:!1,"shippingСost":0,pathFrom:null}},computed:{...(0,eo.Se)({offers:"cartProductsData",totalPrice:"cartTotalPrice",cartTotalAmount:"cartTotalAmount"}),cartLoading(){return this.$store.state.cartLoading}},methods:{numberFormat:me,declensionWord:zt,order(){this.formError={},this.formErrorMessage="",this.messageSuccessOrder="",kt().post(`${Pt}/api/orders`,{...this.formData,paymentTypeId:this.paymentTypeId,deliveryTypeId:this.deliveryTypeId},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((e=>{console.log(e),this.messageSuccessOrder="Успешно",this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",e.data),this.$router.push({name:"orderInfo",params:{id:e.data.id}})})).catch((e=>{this.formError=e.response.data.error.request||{},this.formErrorMessage=e.response.data.error.message}))},deliveryType(){kt().get(`${Pt}/api/deliveries`).then((e=>{console.log(e),this.availableDeliveries=e.data})).catch((e=>{console.log(e)}))}},watch:{deliveryTypeId(e){this.paymentLoading=!0,kt().get(`${Pt}/api/payments`,{params:{deliveryTypeId:e}}).then((e=>{this.availablePayments=e.data})).catch((e=>{console.log(e)})),this.paymentTypeId=null,this.paymentLoading=!1;const t=this.availableDeliveries.find((t=>t.id===e));this.shippingСost=Number(t.price)}},created(){this.deliveryType()},async mounted(){await(0,a.Y3)();const{entireContent:e}=this.$refs;console.log(this.pathFrom),"cart"===this.pathFrom?Wt(e,{xFrom:400,xTo:"0"},!0):"orderInfo"===this.pathFrom?Wt(e,{xFrom:-400,xTo:"0"},!0):Ht(e)},beforeRouteEnter(e,t,r){r((e=>{console.log(t.name),e.pathFrom=t.name}))}};const ms=(0,re.Z)(ps,[["render",Va]]);var fs=ms;const _s=e=>((0,a.dD)("data-v-4f0c418c"),e=e(),(0,a.Cn)(),e),hs={key:1,class:"content container",ref:"entireContent"},gs={class:"content__top"},ys={class:"breadcrumbs"},vs={class:"breadcrumbs__item"},bs=(0,a.Uk)(" Каталог "),ws={class:"breadcrumbs__item"},ks=(0,a.Uk)(" Корзина "),Ps=_s((()=>(0,a._)("li",{class:"breadcrumbs__item"},[(0,a._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1))),Cs={class:"content__title"},Is=(0,a.Uk)(" Заказ оформлен "),xs={class:"cart"},Ts={class:"cart__form form",action:"#",method:"POST"},Ds={class:"cart__field"},Os=_s((()=>(0,a._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1))),Ls={class:"dictionary"},Fs={class:"dictionary__item"},Ss=_s((()=>(0,a._)("span",{class:"dictionary__key"}," Получатель ",-1))),$s={class:"dictionary__value"},Bs={class:"dictionary__item"},Vs=_s((()=>(0,a._)("span",{class:"dictionary__key"}," Адрес доставки ",-1))),Us={class:"dictionary__value"},As={class:"dictionary__item"},Es=_s((()=>(0,a._)("span",{class:"dictionary__key"}," Телефон ",-1))),zs={class:"dictionary__value"},qs={class:"dictionary__item"},Ws=_s((()=>(0,a._)("span",{class:"dictionary__key"}," Email ",-1))),Hs={class:"dictionary__value"},Ms=_s((()=>(0,a._)("li",{class:"dictionary__item"},[(0,a._)("span",{class:"dictionary__key"}," Способ оплаты "),(0,a._)("span",{class:"dictionary__value"}," картой при получении ")],-1)));function Ks(e,t,r,o,s,n){const l=(0,a.up)("BaseLoader"),c=(0,a.up)("router-link"),d=(0,a.up)("CartBlock");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.cartLoading?((0,a.wg)(),(0,a.j4)(l,{key:0,class:"content"})):(0,a.kq)("",!0),n.cartLoading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("main",hs,[(0,a._)("div",gs,[(0,a._)("ul",ys,[(0,a._)("li",vs,[(0,a.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,a.w5)((()=>[bs])),_:1})]),(0,a._)("li",ws,[(0,a.Wm)(c,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,a.w5)((()=>[ks])),_:1})]),Ps]),(0,a._)("h1",Cs,[Is,(0,a._)("span",null," №"+(0,i.zw)(e.$route.params.id),1)])]),(0,a._)("section",xs,[(0,a._)("form",Ts,[(0,a._)("div",Ds,[Os,(0,a._)("ul",Ls,[(0,a._)("li",Fs,[Ss,(0,a._)("span",$s,(0,i.zw)(n.orderInfo.name),1)]),(0,a._)("li",Bs,[Vs,(0,a._)("span",Us,(0,i.zw)(n.orderInfo.address),1)]),(0,a._)("li",As,[Es,(0,a._)("span",zs,(0,i.zw)(n.orderInfo.phone),1)]),(0,a._)("li",qs,[Ws,(0,a._)("span",Hs,(0,i.zw)(n.orderInfo.email),1)]),Ms])]),(0,a.Wm)(d,{shipping:n.shippingCost,offers:n.orderInfo.items,"total-price":n.totalPrice+n.shippingCost},null,8,["shipping","offers","total-price"])])])],512))],64)}var js={components:{CartBlock:us,BaseLoader:Et},data(){return{pathFrom:null}},computed:{orderInfo(){const e=this.$store.getters.orderInfo;return e?{items:e.basket.items.map((e=>({offerId:e.productOffer.id,offerTitle:e.productOffer.title,offerPrice:e.productOffer.price,productProp:[{value:e.productOffer.propValues[0].value}],color:{title:e.color.color.title},amount:e.quantity}))),name:e.name,email:e.email,address:e.address,paymentType:e.paymentType,phone:e.phone,status:e.status,totalPrice:e.totalPrice,deliveryType:e.deliveryType}:{}},shippingCost(){return this.orderInfo.deliveryType?Number(this.orderInfo.deliveryType.price):0},totalPrice(){return this.orderInfo.totalPrice?this.orderInfo.totalPrice:0},cartLoading(){return this.$store.getters.cartLoading}},created(){this.$store.dispatch("loadOrderInfo",this.$route.params.id)},watch:{cartLoading:{async handler(e){if(!e){await(0,a.Y3)();const{entireContent:e}=this.$refs;console.log(e),"order"===this.pathFrom?(console.log("yes"),Wt(e,{xFrom:400,xTo:"0"},!0)):Ht(e)}},immediate:!0}},beforeRouteEnter(e,t,r){r((e=>{console.log(t.name),e.pathFrom=t.name}))}};const Ns=(0,re.Z)(js,[["render",Ks],["__scopeId","data-v-4f0c418c"]]);var Ys=Ns,Zs=r(76),Gs=r.n(Zs);const Rs=[{name:"main",component:Nt,path:"/"},{name:"product",component:uo,path:"/product/:id"},{name:"cart",component:aa,path:"/cart"},{name:"order",component:fs,path:"/order"},{name:"orderInfo",component:Ys,path:"/order/:id"},{name:"notFound",component:_o,path:"/:pathMatch(.*)*"}],Qs=(0,s.p7)({history:(0,s.r5)(Gs().publicPath),routes:Rs});var Js=Qs;const Xs={class:"header"},ei={class:"header__wrapper container"},ti={class:"header__info",ref:"textCatalog"},ri={class:"header__logo",href:"#",ref:"logo"},oi=(0,a._)("img",{src:"img/svg/logo-tech.svg",alt:"Логотип интернет магазина Технозавррр",width:"190",height:"33"},null,-1),ai=[oi],si=(0,a._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1),ii={class:"footer"},ni={class:"footer__wrapper container",ref:"footer"},li=(0,a.uE)('<ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2022 Технозавррр </span>',5),ci=[li],di=(0,a._)("div",{id:"teleport-target"},null,-1),ui=(0,a._)("div",{id:"notification-target"},null,-1);function pi(e,t,r,o,s,i){const n=(0,a.up)("CartIndicator"),l=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",Xs,[(0,a._)("div",ei,[(0,a._)("span",ti,"Каталог",512),(0,a._)("a",ri,ai,512),si,(0,a.Wm)(n)])]),((0,a.wg)(),(0,a.j4)(l,{key:e.$route.fullPath,ref:"main"})),(0,a._)("footer",ii,[(0,a._)("div",ni,ci,512)]),di,ui],64)}const mi=e=>((0,a.dD)("data-v-43e0c916"),e=e(),(0,a.Cn)(),e),fi={key:0},_i=mi((()=>(0,a._)("svg",{width:"30",height:"21",fill:"currentColor"},[(0,a._)("use",{"xlink:href":"#icon-cart"})],-1))),hi={class:"header__count","aria-label":"Количество товаров"};function gi(e,t,r,o,s,n){const l=(0,a.up)("BaseLoaderCircle"),c=(0,a.up)("router-link");return!0===n.cartLoading?((0,a.wg)(),(0,a.iD)("div",fi,[(0,a.Wm)(l,{class:"lds-dual-ring__cart"})])):!1===n.cartLoading?((0,a.wg)(),(0,a.j4)(c,{key:1,class:"header__cart",to:{name:"cart"},"aria-label":"Корзина с товарами"},{default:(0,a.w5)((()=>[_i,(0,a._)("span",hi,(0,i.zw)(e.$store.state.cartProductsData.length),1)])),_:1})):(0,a.kq)("",!0)}var yi={components:{BaseLoaderCircle:ae},data(){return{}},computed:{cartLoading(){return this.$store.getters.cartLoading}}};const vi=(0,re.Z)(yi,[["render",gi],["__scopeId","data-v-43e0c916"]]);var bi=vi,wi={name:"App",data(){return{}},components:{CartIndicator:bi},methods:{...(0,eo.nv)(["loadCart"]),...(0,eo.OI)(["updateUserAccessKey"])},computed:{},created(){const e=localStorage.getItem("userAccessKey");e&&this.updateUserAccessKey(e),this.loadCart(),this.$store.dispatch("loadColors")}};const ki=(0,re.Z)(wi,[["render",pi]]);var Pi=ki,Ci=(0,eo.MT)({state:{userAccessKey:null,cartProductsData:[],cartLoading:!0,cartUpdateItem:[],cartError:{textError:null,status:!1},orderInfo:null,colors:[],chosenOffers:[]},mutations:{updateUserAccessKey(e,t){e.userAccessKey=t},changeStatusCartLoading(e,t){e.cartLoading=t},changeErrorCartLoading(e,t){e.cartError.textError=t.textError,e.cartError.status=t.status},changeStatusCartItem(e,t){const r=e.cartUpdateItem.find((e=>e.offerCartId===t.offerCartId));t.status?r?r.status=t.status:e.cartUpdateItem.push({offerCartId:t.offerCartId,status:t.status}):r.status=!1},addChosenOffers(e,t){let r=[];r=e.chosenOffers.filter((e=>e.productId!==t.productId)),r.push({productId:t.productId,offer:t.offer}),e.chosenOffers=r},addColors(e,t){e.colors=t},updateCartProductData(e,t){console.log(t),e.cartProductsData=t.map((e=>({color:e.color.color,productPrice:e.price,offerPrice:e.productOffer.price,amount:e.quantity,productId:e.productOffer.product.id,offerCartId:e.id,offerId:e.productOffer.id,image:e.productOffer.product.preview.file.url,offerTitle:e.productOffer.title,productProp:e.productOffer.propValues})))},updateCartProductAmount(e,{productId:t,amount:r}){const o=e.cartProductsData.find((e=>e.productId===t));o&&(o.amount=r)},resetCart(e){e.cartProductsData=[]},updateOrderInfo(e,t){e.orderInfo=t}},getters:{colors(e){return e.colors?e.colors:[]},chosenOffers(e){return e.chosenOffers},cartProductsData(e){return e.cartProductsData},cartTotalAmount(e,t){return t.cartProductsData.reduce(((e,t)=>t.amount+e),0)},cartTotalPrice(e,t){return t.cartProductsData.reduce(((e,t)=>t.productPrice*t.amount+e),0)},cartStatusError(e){return e.cartError},cartItemLoading(e){return e.cartUpdateItem},cartLoading(e){return e.cartLoading},orderInfo(e){return e.orderInfo}},actions:{loadCart(e){return e.commit("changeStatusCartLoading",!0),kt().get(`${Pt}/api/baskets`,{params:{userAccessKey:e.state.userAccessKey}}).then((t=>{console.log(e.state.userAccessKey),e.state.userAccessKey||(localStorage.setItem("userAccessKey",t.data.user.accessKey),e.commit("updateUserAccessKey",t.data.user.accessKey)),e.commit("updateCartProductData",t.data.items)})).then((()=>{e.commit("changeStatusCartLoading",!1)}))},loadColors(e){return kt().get(`${Pt}/api/colors`).then((t=>{e.commit("addColors",t.data.items)}))},addProductToCart(e,{productId:t,chosenColor:r,amount:o}){return new Promise((e=>setTimeout(e,500))).then((()=>kt().post(`${Pt}/api/baskets/products`,{productOfferId:t,colorId:r,quantity:o},{params:{userAccessKey:e.state.userAccessKey}}).then((t=>{e.commit("updateCartProductData",t.data.items)})).catch((()=>{e.commit("changeErrorCartLoading",{textError:"Товарное предложение не найдено",status:!0})}))))},updateCartProductAmount(e,{productId:t,amount:r}){return r<1?0:(e.commit("changeStatusCartItem",{status:!0,offerCartId:t}),kt().put(`${Pt}/api/baskets/products`,{basketItemId:t,quantity:r},{params:{userAccessKey:e.state.userAccessKey}}).then((r=>{e.commit("updateCartProductData",r.data.items),e.commit("changeStatusCartItem",{status:!1,offerCartId:t})})).catch((()=>{e.commit("changeStatusCartItem",{status:!1,offerCartId:t})})))},async deleteProduct(e,t){e.commit("changeStatusCartItem",{status:!0,offerCartId:t}),await fetch(`${Pt}/api/baskets/products?userAccessKey=${e.state.userAccessKey}`,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({basketItemId:t})}).then((t=>{t.json().then((t=>{e.commit("updateCartProductData",t.items)}))})).catch((()=>{e.commit("changeErrorCartLoading",{textError:!0,status:"Что-то пошло не так..."})})),e.commit("changeStatusCartItem",{status:!1,offerCartId:t})},loadOrderInfo(e,t){return e.commit("changeStatusCartLoading",!0),kt().get(`${Pt}/api/orders/${t}`,{params:{userAccessKey:e.state.userAccessKey}}).then((t=>{console.log(t.data),e.commit("updateOrderInfo",t.data),e.commit("changeStatusCartLoading",!1)}))}}});const Ii=(0,o.ri)({render:()=>(0,a.h)(Pi)});Ii.use(Js),Ii.use(Ci),Ii.mount("#app")},76:function(e){e.exports={publicPath:"/build-vue-test/"}}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,o,a,s){if(!o){var i=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],s=e[d][2];for(var n=!0,l=0;l<o.length;l++)(!1&s||i>=s)&&Object.keys(r.O).every((function(e){return r.O[e](o[l])}))?o.splice(l--,1):(n=!1,s<i&&(i=s));if(n){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,a,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,s,i=o[0],n=o[1],l=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in n)r.o(n,a)&&(r.m[a]=n[a]);if(l)var d=l(r)}for(t&&t(o);c<i.length;c++)s=i[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(d)},o=self["webpackChunktest_vue"]=self["webpackChunktest_vue"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(500)}));o=r.O(o)})();
//# sourceMappingURL=app.03f194b3.js.map